说一下我的理解。

之所以需要设计电路，很明显是为了实现某种需求。

比方说，我要听音乐。

那么，除了扬声器外，我们必须准备一块电路板。也就是需要设计并制作一块线路板。在这里我们只谈设计。

# 一、确定详细的需求

举例：

1、我要求电路可以使扬声器最大功率达到10瓦特（W）；

2、我要求扬声器输出10W的功率时，放大器失真（也就是THD）不超过0.5%；

3、我要求放大器的频率至少能工作在20Hz至20KHz。

有了这三个需求后。

便可以进行设计电路架构了。
# 二、电路架构的设计

这也是最重要的一步。电路架构的设计。

就像建造房子，先浇筑框架，然后细化。

还是以音频放大器举例。

先计算当输出功率为10W时，流过扬声器的电流I=1.12A。（假设负载为8Ω；1KHz）

由于需要流过这么大的电流，在晶体管的三种基本接法中，只能选择集电极接地电路。也就是常说的发射极跟随器。

如下图：


此时电压为Vo=1.12*8=8.96V。

而CD机出来的信号有两个特点。一是有效值约2V；二是输出阻抗相对较大。（且CD机信号末尾一般有隔直流电容）

所以，需要把CD机出来的音频信号的电压放大到8.96V。

此时可以选择共基或共射电路。但由于音源输出电阻较大，而共基电路输入电阻较小。所以只能选共射电路。

如下图：


那么，电路的基本架构也就成型了。如图：

# 三、对架构进行调整

分析第二步架构中存在哪些问题。

比方说上面这个架构，我们分析一下他的缺点：

1、跟随器的空载电流较大（空载电流需要远大于1.12A，否则波形负半周必定会削波），造成发热严重且放大器效率低下，如果要解决这个问题必须接上非常大的热沉（散热板）；

2、输出级使用了电容，会和负载形成高通滤波器，但如果降低HPF所造成的影响，势必需要使用大容量电解电容，增加了较多成本不说，可靠性也会降低；

3、这个电路的温漂会很严重。

4、这个电路的失真会很大。

根据这四个缺点，我们进行架构的调整。

1、空载电流较大，所以必须修正为推挽跟随器电路；同时可以解决使用输出电容的问题；

2、对初级电路使用差动放大电路，改善温漂的情况；（以牺牲一个三极管为代价）

3、关于失真的问题，可以增加开环增益（使用恒流源、采用多级放大等），然后进行深度负反馈配置，可以大幅降低THD和噪声；

调整后的架构如图：


架构确定后，就是具体设计了。简单来说，就是确定架构中每一个元器件的具体参数、型号。

这一步也是相当关键的。对于本图中，我们可以先进行人为计算（估算，即把基射压降固定看做0.65V），利用欧姆定律即可。然后进行微调整。

此时我们可以说电路原理图已经基本设计完毕。接下来一般会进行仿真，一般使用LTSPICE或者Multisim10.0。

架构确定后，就是具体设计了。简单来说，就是确定架构中每一个元器件的具体参数、型号。

这一步也是相当关键的。对于本图中，我们可以先进行人为计算（估算，即把基射压降固定看做0.65V），利用欧姆定律即可。然后进行微调整。

此时我们可以说电路原理图已经基本设计完毕。接下来一般会进行仿真，一般使用LTSPICE或者Multisim10.0。

把原理图确认无误后，输入到AD、PADS等EDA软件，即可着手进行线路板LAYOUT的设计了。

有关PCB布局（LAYOUT）的设计又是相当关键的一个步骤。尤其是高频线路板或者超高速电路。在高频电路中，就算原理图设计的再好再精确，不懂布局设计的话，信号会发生很多奇怪的现象。

当然，高频电路（RF）的拓扑也和低频有很大的区别。这点我会放在最后面进行一些细节描述。

以上是模拟电路设计的基本思路。

对于数字IC电路，则是完全不同的所谓的HDL设计方法。也就是硬件描述语言。主流的有Verilog语言。通俗的说就是利用计算机设计线路。设计人员只需要提出需求，接下来就完全交给编译器。

比方说：

```c++
module test(
input a;
input b;
output c;
);
assign c=a^b;
endmodule
```

编译器很快识别出这是一个异或门。

毕竟大规模数字电路过于复杂，只能借助计算机。

后续我会写一个实际的例子来表明如何对数字电路进行设计。

# 四、元件的具体设计

上次写的时候对电路框架进行了简单的介绍，而关于元件的具体设计没怎么说。

本次更新写一下电路具体设计时需要注意的地方。

电路架构确定后，需要对每一个元器件进行计算，从而确定每个元件的额定参数。

举个例子：

示波器是一个很常见的仪器，被誉为电子工程师的眼睛。

示波器的最重要的配件便是探头。一般随机配备的探头都是具有10:1和1:1两种衰减比。

最大测量电压一般不超过数百伏。（典型值300Vrms，10:1衰减）

如果要测量高压信号（如一些高压脉冲），显然随机的标配探头是不能进行测试的。

而设备公司售卖的专用高压探头往往是相当昂贵的。

以T公司售卖的无源高压探头为例，价格往往为四位数。

示波器用高压无源探头其本质为频率特性较好的衰减器。（而万用表的衰减器虽然可能衰减比达到了要求，但频率特性不满足）

如果是为了省钱而要自制探头的话，我们设计了下图的电路原理图。

当信号最高电压为20KV时，示波器上的电压为20V，此时把示波器内探头衰减比调为1000:1，屏幕上可以观察到相应波形。

下面确定具体的元器件型。

R1至R10上的总压降为20000/1001*1000≈20KV；每个10M电阻的压降为2000V；

那么每个电阻功率为P=U²/R=0.4W。

那么我们选择1W（取一倍的余量）的金属膜（或碳膜）电阻便可以了吗？

结果是自制的高压探头会被炸掉。

原因是我们只考虑了电阻的额定功率，而忘记了考虑其他的参数是否满足要求。

在本例中，未考虑的参数是电阻的额定电压。

我们看下图U公司的电阻DATASHEET。

我们可以看到1W电阻额定电压只有500V，而绝缘耐受电压为1000V。所以加上2KV的电压时，电阻会被击穿，导致电阻短路，自制的高压探头自然就BOOM了。（实际情况可能会看到一些“噼啪”的小火花和爆鸣声）

而实际电路制作时，分压电阻必须加上补偿电容，大小视示波器的输入电容而定。假定示波器输入电容为30pF，那么补偿电容一般设置为30fF。（这种电容应该买不到，所以实际电路中需要串联多个电容，以形成这么小的电容）否则会因为示波器自身输入电容的缘故导致无法使用。

# 参考

<a href="https://www.zhihu.com/question/358059963">一个实际电路的原理图是怎样设计出来的？</a>

